---
title: DIP-Ioc-DI-Server_Locator
date: 2017-07-13 20:07:40
categories: container
---

### DIP  依赖倒置

>DIP是一种软件架构的理念。传统架构中，上层代码依赖底层，底层代码的变动会导致上层代码需要被修改才能适配。依赖倒置，底层依赖上层。暂时理解为，上层底层都依赖接口。上层依赖抽象的接口，底层实现接口。应用层可以采用不同的底层实现。

### Ioc 控制反转

>依赖倒置的实现


### DI 依赖注入  Server Locator 服务定位

> Ioc的实现方式

### 容器（Container）
> 管理对象的生成、资源取得、销毁等生命周期  
> 建立对象与对象之间的依赖关系  
> 启动容器后，所有对象直接取用，不用编写任何一行代码来产生对象，或是建立对象之间的依赖关系

### 为啥为啥？

> 因为懒！ 因为人脑不够用！   
> 软件中经常变化的部分主要在于领域层。底层的接口，诸如日志记录，发送邮件，写文件...很多的组件是可以共用的，这一层被称为基础设施。以日志记录为例，可以记录到文件中，mysql中，mongodb中。记录的写接口可以抽象出来，mysql，files,mongodb接口可以按照规定的接口实现。在使用的时候根据场景变化选择不同的写接口就能满足需求。依赖抽象而非具体.既然是依赖抽象，那么在应用调用的时候才会实例化底层的类，可以采用构造函数参数或者属性设置的方式将依赖的类注入。如果A依赖B,B依赖C,D依赖E,E依赖C,我们在实例化AD之前需要先实例化BCE，在实例化BE之前需要先实例化C。这是一项枯燥，易错的工作。容器的概念相当于一个全局的注册树。应用不再依赖底层的实例化类，应用转而依赖容器。由容器去管理依赖类的实例化，依赖关系，对象的生命周期等。依赖关系由php的反射解决，解析构造函数的参数。容器的概念与服务定位，闭包等概念相关...
