---
title: php引用浅复制深复制
categories: php
date: 2018-03-27 11:22:15
---


### 非特殊场景 不建议使用

#### 浅复制

> 共用一个对象的引用,类比软连接。修改内存数据，所有引用都改变

	$a = new A();
	$b = $a;


#### 深复制

	$a = new A();
	$b = clone $a;

> 克隆对象的handle(全局标识不一样),但是在内部引用的对象还是同一个地址，这个就需要非常清楚对象的行为，容易导致bug
> 不然就需要在 __clone的魔术方法重新实例化依赖的对象
> 虽然可以用序列化反序列解决多个需要重新初始化的值 总感觉可以有更好的方式来处理


* 对象在实例化之后如果想多次复用最好确保类的简单 依赖较少 不然会导致莫名的oom，bug,属性变更等问题
* 对象作为函数依赖，一般不建议再次修改对象的属性，这个还是要业务线清晰。不要在不需要update的地方随意变更对象属性 